!function(e){"function"==typeof define&&define.amd?define(e):window.Sactory=e()}(function(){function e(){return Object.toString().replace(/Object/,"Sactory").replace(/native/,"sactory")}function t(e,t){Object.defineProperty(E,e,{get:function(){return t}})}E.toString=e.toString=e,t("VERSION_MAJOR",0),t("VERSION_MINOR",102),t("VERSION_PATCH",0),t("VERSION","0.102.0");var m={};m.startsWith=String.prototype.startsWith||function(e,t){return t=!t||t<0?0:+t,this.substring(t,t+e.length)===e},m.endsWith=String.prototype.endsWith||function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e},m.trimStart=String.prototype.trimStart||function(){return this.replace(/^[\s\uFEFF\xA0]+/g,"")},m.trimEnd=String.prototype.trimEnd||function(){return this.replace(/[\s\uFEFF\xA0]+$/g,"")},m.padStart=String.prototype.padStart||function(e,t){for(var n=String(this);n.length<e;)n=t+n;return n},m.assign=Object.assign||function(e,t){for(var n in t)e[n]=t[n];return e};var g={};function n(e,t){Object.defineProperty(g,e,{value:t})}n("BUILDER_TYPE_NONE",0),n("BUILDER_TYPE_PROP",1),n("BUILDER_TYPE_CONCAT",2),n("BUILDER_TYPE_ON",3),n("BUILDER_TYPE_WIDGET",4),n("BUILDER_TYPE_EXTEND_WIDGET",5),n("OBSERVABLE_UPDATE_TYPE_ARRAY_PUSH",1048571),n("OBSERVABLE_UPDATE_TYPE_ARRAY_POP",1048572),n("OBSERVABLE_UPDATE_TYPE_ARRAY_UNSHIFT",1048573),n("OBSERVABLE_UPDATE_TYPE_ARRAY_SHIFT",1048574),n("OBSERVABLE_UPDATE_TYPE_ARRAY_SPLICE",1048575),n("OBSERVABLE_UPDATE_TYPE_FORM_RANGE_START",1048576),n("OBSERVABLE_UPDATE_TYPE_FORM_RANGE_LENGTH",1048576);var r="object"==typeof window&&-1!=window.navigator.platform.indexOf("Mac")?"meta":"ctrl";E.config={prefix:"sa",shortcut:{cmd:r,save:"keydown:"+r+":key-code.83",copy:"keydown:"+r+":key-code.67",cut:"keydown:"+r+":key-code.88",paste:"keydown:"+r+":key-code.86",print:"keydown:"+r+":key-code.80",undo:"keydown:"+r+":key-code.90",redo:"keydown:"+r+":key-code.89",find:"keydown:"+r+":key-code.70",select:"keydown:"+r+":key-code.65"},event:{aliases:{space:" ",ctrl:"control",column:":",dot:"."}}},E.newPrefix=function(){return E.config.prefix+Math.floor(1e5*Math.random())};var i={};function o(e){this.parent=e,this.children=[],this.subscriptions=[],this.elements=[],this.rollbacks=[]}E.addAnimation=function(e,t){i[e]=t},E.getAnimation=function(e){return i.hasOwnProperty(e)?i[e]:null},E.createKeyframes=function(e,t){var n=E.newPrefix(),r=[];if("function"==typeof e)e=e(t);else{if(e.className)return e.className;e.className=n}t.easing||(t.easing=e.easing),t.duration||(t.duration=e.duration);var i=document.createElement("style");if(e.element)i.textContent="@keyframes "+n+"{"+e.element.textContent+"}";else{for(var o in e)if("from"==o||"to"==o){var a=[];for(var s in e[o])a.push({selector:s,value:e[o][s]+""});r.push({selector:o,value:a})}i.textContent=E.compileStyle([{selector:"@keyframes "+n,value:r}])}return document.head.appendChild(i),n},o.prototype.fork=function(){var e=new o(this);return this.children.push(e),e},o.prototype.rollback=function(){this.subscriptions.length&&(this.subscriptions.forEach(function(e){e.dispose()}),this.subscriptions=[]),this.elements.length&&(this.elements.forEach(function(e){e.__builderInstance&&e.dispatchEvent&&e.__builder.dispatchEvent("remove"),e.parentNode&&e.parentNode.removeChild(e)}),this.elements=[]),this.rollbacks.length&&(this.rollbacks.forEach(function(e){e()}),this.rollbacks=[]),this.children.length&&(this.children.forEach(function(e){e.rollback()}),this.children=[])},o.prototype.subscribe=function(e){this.subscriptions.push(e)},o.prototype.appendChild=function(e){this.elements.push(e)},o.prototype.addRollback=function(e){this.rollbacks.push(e)};var a=new o(null);Object.defineProperty(E,"bindFactory",{get:function(){return a}}),E.createAnchor=function(e,t,n){var r=document.createTextNode("");return Object.defineProperty(r,"nodeType",{value:Node.ANCHOR_NODE}),n?e.insertBefore(r,n):e.appendChild(r),t&&t.appendChild(r),r},E.bind=function(t,n,r,e,i,o){var a=(r||E.bindFactory).fork(),s=null,c=r?function(e){r&&r.subscribe(e)}:function(){};function l(e){o.call(t,n,a,s,e)}function u(){a.rollback()}if(n&&(s=E.createAnchor(n,r,e)),i.observe&&(i=i.observe),i.forEach)i.forEach(function(e){c(e.subscribe(function(){u(),l()}))}),l();else{if(!E.isObservable(i))throw new Error("Cannot bind to the given value: not an observable or an array of observables.");c(i.subscribe(function(e){u(),l(e)})),l(i.value)}},E.bindIfElse=function(r,n,e,t,i){var o,a=Array.prototype.slice.call(arguments,5),s=(e||E.bindFactory).fork(),c=(e||E.bindFactory).fork();n&&(o=E.createAnchor(n,e,t)),i.forEach(function(e){e[2]&&Array.prototype.push.apply(e[1],E.filterObservables(e[2]))});var l,u=4276215469;function p(){l=i.map(function(e){return null});for(var e=0;e<l.length;e++){var t=i[e];if(!t[0]||(l[e]=!!t[0].call(r)))return void a[u=e].call(r,n,c,o)}u=4276215469}i.forEach(function(t,n){t[1]&&t[1].forEach(function(e){s.subscribe(e.subscribe(function(){if(n<=u){var e=!!t[0].call(r);e!=l[n]&&(l[n]=e,c.rollback(),p())}}))})}),p()},E.bindEach=function(u,p,e,t,n,i,h){if(i.call(u).forEach){var f,d,m=(e||E.bindFactory).fork();p&&(f=E.createAnchor(p,e,t),d=E.createAnchor(p,e,t));var b=[];function v(e,t,n,r,i,o){h.call(u,p,t,n,r,i,o),b[e]({bind:t,anchor:n})}function y(){i.call(u).forEach(function(e,t,n){v("push",m.fork(),p?E.createAnchor(p,m,d):null,e,t,n)})}m.subscribe(n.subscribe(function(n,e,t,r){switch(t){case g.OBSERVABLE_UPDATE_TYPE_ARRAY_PUSH:Array.prototype.forEach.call(r,function(e,t){v("push",m.fork(),p?E.createAnchor(p,m,d):null,e,n.length-r.length+t,n)});break;case g.OBSERVABLE_UPDATE_TYPE_ARRAY_POP:var i=b.pop();i&&(i.bind.rollback(),i.anchor&&i.anchor.parentNode.removeChild(i.anchor));break;case g.OBSERVABLE_UPDATE_TYPE_ARRAY_UNSHIFT:Array.prototype.forEach.call(r,function(e){v("unshift",m.fork(),p?E.createAnchor(p,m,f.nextSibling):null,e,0,n)});break;case g.OBSERVABLE_UPDATE_TYPE_ARRAY_SHIFT:var o=b.shift();o&&(o.bind.rollback(),o.anchor&&o.anchor.parentNode.removeChild(o.anchor));break;case g.OBSERVABLE_UPDATE_TYPE_ARRAY_SPLICE:var a=r[0],s=b[a],c=s&&s.anchor&&s.anchor.nextSibling,l=[];Array.prototype.slice.call(r,2).forEach(function(e){l.push({value:e})}),Array.prototype.splice.apply(b,Array.prototype.slice.call(r,0,2).concat(l)).forEach(function(e){e.bind.rollback(),e.anchor&&e.anchor.parentNode.removeChild(e.anchor)}),l.forEach(function(e,t){e.bind=m.fork(),e.anchor=c?E.createAnchor(p,m,c):null,h.call(u,p,e.bind,e.anchor,e.value,t+a,n)});break;default:m.rollback(),b=[],y()}})),y()}else E.bind(u,p,e,t,n,function(t,n,r){E.forEach(u,i.call(u),function(){var e=[t,n,r];Array.prototype.push.apply(e,arguments),h.apply(u,e)})})},E.bindEachMaybe=function(t,n,r,i,e,o,a){E.isObservable(e)?E.bindEach(t,n,r,i,e,o,a):E.forEach(t,o.call(t),function(){var e=[n,r,i];Array.prototype.push.apply(e,arguments),a.apply(t,e)})},E.subscribe=function(e,t,n,r){var i=E.observe(t,n,r,!0);return e&&e.subscribe(i),i};var s=E.newPrefix(),c=!1;function l(e){this.element=e,this.animations={i:[],o:[]},this.animationTimeout=!1,this.animationStart=0,Object.defineProperty(this,"runtimeId",{configurable:!0,get:function(){var e=Math.round(1e5*Math.random());return Object.defineProperty(this,"runtimeId",{get:function(){return e}}),e}})}l.prototype.widgets={},l.prototype.widget=null,l.prototype.subscribe=function(e,t){e&&e.subscriptions.push(t)},l.prototype.attrImpl=function(e,t){this.element.setAttribute(e,t)},l.prototype.attr=function(t,e,n){var r=this.attrImpl.bind(this);E.isObservable(e)?this.subscribe(n,E.observe(e,function(e){r(t,e)})):r(t,e)},l.prototype.propImpl=function(e,t){var n=this.element;"@"==e.charAt(0)&&(n=this.widgets,"."==(e=e.substr(1)).charAt(0)&&(e=e.substr(1)));for(var r=e.split(".");1<r.length;)n=n[r.shift()];n[r[0]]=t},l.prototype.prop=function(t,e,n,r){var i=this.propImpl.bind(this);E.isObservable(e)?this.subscribe(n,E.observe(e,function(e){i(t,e)},r)):i(t,e)},l.prototype.append=function(e,t,n){n&&n.parentNode===this.element?this.element.insertBefore(e,n):this.element.appendChild(e),t&&t.appendChild(e)},l.prototype.visible=function(e,t,n){if(!c){c=!0;var r=document.createElement("style");r.textContent="."+s+"{display:none !important;}",document.head.appendChild(r)}var i=this,o=function(e){!!e^t?i.removeClass(s):i.addClass(s)};if(E.isObservable(e)){this.subscribe(n,E.observe(e,function(e,t){o(e,t)}));var a=o;o=function(r,e){if(r!=e){this.animationTimeout&&(this.element.style.animation="",clearTimeout(this.animationTimeout),this.animationTimeout=!1);var i=this.animations[r?"i":"o"];if(i.length){r&&a(!0),i=i.slice(0);var o=0;(function e(){var t=i[o],n=t.options.duration||1;this.element.style.animation=t.name+" "+n+"s "+(t.options.easing||"linear")+" forwards",this.element.style.animationDirection=r?"reverse":"normal",this.animationTimeout=setTimeout(function(){++o<i.length?e.call(this):(a(r),this.element.style.animation="",this.animationTimeout=!1)}.bind(this),1e3*n)}).call(this)}else a(r)}}.bind(this)}else o(e)},l.prototype.style=function(t,e,n){var r,i=document.createElement("style"),o=E.newPrefix(),a=t.indexOf(".");if(-1==a)r=function(e){return"."+o+t+"{"+e+"}"};else{var s=t.substr(a+1);t=t.substring(0,a),r=function(e){return"."+o+t+"{"+s+":"+e+"}"}}E.isObservable(e)?this.subscribe(E.observe(e,function(e){i.textContent=r(e)})):i.textContent=r(e),this.className(o,n),document.head.appendChild(i),n&&n.appendChild(i)},l.prototype.text=function(e,t,n){var r;E.isObservable(e)?(r=document.createTextNode(""),this.subscribe(t,E.observe(e,function(e){r.textContent=e,r.observed=!0}))):r=document.createTextNode(e),n&&n.parentNode===this.element?this.element.insertBefore(r,n):this.element.appendChild(r),t&&t.appendChild(r)},l.prototype.html=function(e,n,t){var r,i=this,o=document.createElement("div");function a(e,t){o.innerHTML=e,(r=Array.prototype.slice.call(o.childNodes,0)).forEach(function(e){i.append(e,n,t)})}if(E.isObservable(e)){var s=E.createAnchor(this.element,n,t);this.subscribe(n,e.subscribe(function(e){r.forEach(function(e){i.element.removeChild(e)}),a(e,s)})),a(e.value,s)}else a(e,t)},l.prototype.className=function(e,t){var n=this;if(E.isObservable(e)){var r=e.value;this.subscribe(t,e.subscribe(function(e){n.removeClassName(r),n.addClassName(r=e)})),this.addClassName(r),t&&t.addRollback(function(){n.removeClassName(r)})}else this.addClassName(e),t&&t.addRollback(function(){n.removeClassName(e)})},l.prototype.classNameIf=function(n,e,t){var r=this;E.isObservable(e)?(this.subscribe(t,e.subscribe(function(e,t){e?r.addClassName(n):r.removeClassName(n)})),e.value&&this.addClassName(n),t&&t.addRollback(function(){e.value&&r.removeClassName(n)})):e&&(this.addClassName(n),t&&t.addRollback(function(){r.removeClassName(n)}))},l.prototype.event=function(l,e,t,n){var r=e.split(":"),i=r.shift(),u=t||function(){},p={},h=!1;if(r.reverse().forEach(function(t){var n=u;switch(t){case"this":u=function(e){return n.call(l,e,this)};break;case"prevent":u=function(e){return e.preventDefault(),n.call(this,e)};break;case"stop":u=function(e){return e.stopPropagation(),n.call(this,e)};break;case"once":p.once=!0;break;case"passive":p.passive=!0;break;case"capture":h=!0;break;case"bubble":h=!1;break;case"trusted":u=function(e){if(e.isTrusted)return n.call(this,e)};break;case"!trusted":u=function(e){if(!e.isTrusted)return n.call(this,e)};break;case"self":u=function(e){if(e.target===this)return n.call(this,e)};break;case"!self":u=function(e){if(e.target!==this)return n.call(this,e)};break;case"alt":case"ctrl":case"meta":case"shift":u=function(e){if(e[t+"Key"])return n.call(this,e)};break;case"!alt":case"!ctrl":case"!meta":case"!shift":t=t.substr(1),u=function(e){if(!e[t+"Key"])return n.call(this,e)};break;default:var e="!"!=t.charAt(0);e||(t=t.substr(1));var r=t.split(".");switch(r[0]){case"key":var i=r.slice(1).map(function(e){var t=e.toLowerCase();E.config.event.aliases.hasOwnProperty(t)&&(t=E.config.event.aliases[t]);var n,r=t.split("-");if(2==r.length&&(1==r[0].length&&1==r[1].length?n=[r[0].toUpperCase().charCodeAt(0),r[1].toUpperCase().charCodeAt(0)]:"f"==r[0].charAt(0)&&"f"==r[1].charAt(0)&&(n=[111+parseInt(r[0].substr(1)),111+parseInt(r[1].substr(1))]),n))return function(e){var t=e.keyCode||e.which;return t>=n[0]&&t<=n[1]};return"-"!=t&&(t=t.replace(/-/g,"")),function(e){return e.key.toLowerCase()==t}});u=e?function(e){for(var t in i)if(i[t](e))return n.call(this,e)}:function(e){for(var t in i)if(i[t](e))return;return n.call(this,e)};break;case"code":i=r.slice(1).map(function(e){return e.toLowerCase().replace(/-/g,"")});u=e?function(e){if(-1!=i.indexOf(e.code.toLowerCase()))return n.call(this,e)}:function(e){if(-1==i.indexOf(e.code.toLowerCase()))return n.call(this,e)};break;case"keyCode":case"key-code":i=r.slice(1).map(function(e){return parseInt(e)});u=e?function(e){if(-1!=i.indexOf(e.keyCode||e.which))return n.call(this,e)}:function(e){if(-1==i.indexOf(e.keyCode||e.which))return n.call(this,e)};break;case"button":var o=r.slice(1).map(function(e){switch(e){case"main":case"left":return 0;case"auxiliary":case"wheel":case"middle":return 1;case"secondary":case"right":return 2;case"fourth":case"back":return 3;case"fifth":case"forward":return 4;default:return parseInt(e)}});u=e?function(e){if(-1!=o.indexOf(e.button))return n.call(this,e)}:function(e){if(-1==o.indexOf(e.button))return n.call(this,e)};break;case"location":var a=r.slice(1).map(function(e){switch(e){case"standard":return 0;case"left":return 1;case"right":return 2;case"numpad":return 3;default:return parseInt(e)}});u=e?function(e){if(-1!=a.indexOf(e.location))return n.call(this,e)}:function(e){if(-1==a.indexOf(e.location))return n.call(this,e)};break;case"throttle":if(!(0<=(c=parseInt(r[1]))))throw new Error("Event delay must be higher or equals than 0.");var s=!1;u=function(e){s||(n.call(this,e),s=!0,s=setTimeout(function(){s=!1},c))};break;case"debounce":var c;if(!(0<=(c=parseInt(r[1]))))throw new Error("Event delay must be higher or equals than 0.");u=function(e){s&&clearTimeout(s);var t=this;s=setTimeout(function(){s=0,n.call(t,e)},c)};break;default:throw new Error("Unknown event modifier '"+t+"'.")}}}),"documentappend"==i){i="append";var o=u,a=this.element;u=function(e){a.ownerDocument.contains(a)?o.call(a,e):this.parentNode.__builder.eventImpl("append",u,p,h,n)}}this.eventImpl(i,u,p,h,n)},l.prototype.eventImpl=function(e,t,n,r,i){if(this.element.addEventListener(e,t,n,r),i){var o=this.element;i.addRollback(function(){o.removeEventListener(e,t,r)})}},l.prototype.addClassName=function(e){this.element.className.length&&!m.endsWith.call(this.element.className," ")&&(e=" "+e),this.element.className+=e},l.prototype.removeClassName=function(e){var t=this.element.className.indexOf(e);-1!=t&&(this.element.className=(this.element.className.substring(0,t)+this.element.className.substr(t+e.length)).replace(/\s{2,}/," "))},l.prototype[g.BUILDER_TYPE_NONE]=function(e,t,n){this.attr(e,t,n)},l.prototype[g.BUILDER_TYPE_PROP]=function(e,t,n){switch(e){case"visible":return this.visible(t,!1,n);case"hidden":return this.visible(t,!0,n);case"enabled":E.isObservable(t)?this.prop("disabled",E.computedObservable(null,n,[t],function(){return!t.value}),n):this.prop("disabled",!t,n);break;default:m.startsWith.call(e,"style:")?this.style(e.substr(5),t,n):this.prop(e,t,n)}},l.prototype[g.BUILDER_TYPE_CONCAT]=function(e,t,n,r){switch(e){case"text":return this.text(t,n,r);case"html":return this.html(t,n,r);case"class":return this.className(t,n);default:if(!m.startsWith.call(e,"class:"))throw new Error("Unknown concat attribute '"+e+"'.");this.classNameIf(e.substr(6),t,n)}},l.prototype[g.BUILDER_TYPE_ON]=function(e,t,n,r,i){this.event(i,e,E.unobserve(t),n)},l.prototype.form=function(e,n,t){if(!E.isObservable(n))throw new Error("Cannot two-way bind '"+this.element.tagName.toLowerCase()+"': the given value is not an observable.");var r,i=e.split("::"),o=i.slice(1),a=g.OBSERVABLE_UPDATE_TYPE_FORM_RANGE_START+Math.floor(Math.random()*g.OBSERVABLE_UPDATE_TYPE_FORM_RANGE_LENGTH),s=this.element.type,c=[];if("checkbox"==s)this.prop("checked",n,t,a),r=function(e){e(this.checked)};else if("radio"==s){this.element.name||(this.element.name=n.radioGroupName||(n.radioGroupName=E.newPrefix()));var l=this.element;this.subscribe(t,E.observe(n,function(e){l.checked=e==l.value},a)),r=function(e){e(this.value)}}else if(this.element.multiple){var u=this.element.options;this.subscribe(t,E.observe(n,function(t){Array.prototype.forEach.call(u,function(e){e.selected=-1!=t.indexOf(e.value)})},a)),r=function(e){e(Array.prototype.map.call(b(this),function(e){return e.value}))}}else this.prop("value",n,t,a),r=function(e){e(this.value)};if(o.length||("SELECT"==this.element.tagName.toUpperCase()?o.push("change"):"checkbox"==this.element.type||"radio"==this.element.type?o.push("change"):o.push("input")),i[0].split(":").slice(1).forEach(function(e){c.push(function(){switch(e){case"number":case"num":case"float":return parseFloat;case"int":case"integer":return parseInt;case"date":switch(s){case"date":case"month":return function(){var e=this.split("-");return new Date(e[0],e[1]-1,e[2]||1)};case"time":return function(){var e=this.split(":"),t=new Date;return t.setHours(e[0]),t.setMinutes(e[1]),t.setSeconds(0),t.setMilliseconds(0),t};case"datetime-local":default:return function(){return new Date(this)}}case"comma":return function(){return this.replace(/,/g,".")};case"trim":return String.prototype.trim;case"trim-left":case"trim-start":return m.trimStart;case"trim-right":case"trim-end":return m.trimEnd;case"lower":case"lowercase":return String.prototype.toLowerCase;case"upper":case"uppercase":return String.prototype.toUpperCase;case"capital":case"capitalize":return function(){return this.charAt(0).toUpperCase()+this.substr(1)};default:throw new Error("Unknown value modifier '"+e+"'.")}}())}),n.computed&&1==n.dependencies.length&&n.dependencies[0].deep){var p=n.dependencies[0],h=p.lastPath.slice(0,-1),f=p.lastPath[p.lastPath.length-1];c.push(function(e){var t=p.value;h.forEach(function(e){t=t[e]}),n.updateType=a,t[f]=e})}else c.push(function(e){n.updateType=a,n.value=e});for(var d=0;d<o.length;d++)this.event(null,o[d],function(){r.call(this,function(t){c.forEach(function(e){t=e.call(t,t)})})},t)},l.prototype.addAnimation=function(e,t,n){"number"==typeof n&&(n={duration:n});var r=E.getAnimation(t);if(!r)throw new Error("Animation '"+t+"' is not defined.");var i={name:E.createKeyframes(r,n),options:n};"io"==e?(this.animations.i.push(i),this.animations.o.push(i)):"in"==e?this.animations.i.push(i):"out"==e&&this.animations.o.push(i)},l.prototype.removeClass=Object.getOwnPropertyDescriptor(Element.prototype,"classList")?(l.prototype.addClass=function(e){this.element.classList.add(e)},function(e){this.element.classList.remove(e)}):(l.prototype.addClass=function(e){-1!=!this.element.className.split(" ").indexOf(e)&&(this.element.className=(this.element.className+" "+e).trim())},function(t){this.element.className=this.element.className.split(" ").filter(function(e){return e!=t}).join(" ")}),l.prototype.dispatchEvent="function"==typeof Event?function(e,t,n){var r=new Event(e,t,n);return this.element.dispatchEvent(r),r}:function(e,t,n){var r=document.createEvent("Event");return r.initEvent(e,t,n),this.element.dispatchEvent(r),r};var b="function"==typeof HTMLSelectElement&&Object.getOwnPropertyDescriptor(HTMLSelectElement.prototype,"selectedOptions")?function(e){return e.selectedOptions}:function(e){return Array.prototype.filter.call(e.options,function(e){return e.selected})};function E(e,t,n,r){e={context:e,element:t,container:t,bind:n,anchor:r};for(var i=4;i<arguments.length;i++){var o=arguments[i],a=o[0];o[0]=e,a.apply(null,o)}return e.element}Object.defineProperty(Node,"ANCHOR_NODE",{writable:!1,enumerable:!0,configurable:!1,value:99}),E.NS_XHTML="http://www.w3.org/1999/xhtml",E.NS_SVG="http://www.w3.org/2000/svg",E.NS_MATHML="http://www.w3.org/1998/mathml",E.NS_XUL="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",E.NS_XBL="http://www.mozilla.org/xbl";var u,p={};function h(e){this.name=e,this.slots={}}function f(e){Object.defineProperty(e.prototype,"__builder",{get:function(){return this.__builderInstance||(this.__builderInstance=new l(this))}})}function d(e){this.internal={value:this.replace(e),snaps:{},count:0,subscriptions:{}},this.updateType=void 0,this.updateDate=void 0}function v(e){d.call(this,e)}function y(e){d.call(this,e)}function w(e,t,n){var r;if("function"==typeof Promise?this.handleReturn=function(e){if(e instanceof Promise){var t=this;return e.then(function(e){d.prototype.updateImpl.call(t,e)}),!0}return!1}:this.handleReturn=function(){return!1},n.get){var i=n.get(t);r=new e(this.handleReturn(i)?t:i)}else r=new e(t);return r.storage=n,r.updateImpl=function(e,t){n.set(e),d.prototype.updateImpl.call(this,e,t)},r}function _(e,t){Array.call(this),Array.prototype.push.apply(this,t),Object.defineProperty(this,"observable",{enumerable:!1,value:e});var n=this.length;Object.defineProperty(this,"length",{configurable:!1,enumerable:!1,writable:!0,value:n})}function A(e,t){Date.call(this),Object.defineProperty(this,"date",{enumerable:!1,value:t}),Object.defineProperty(this,"observable",{enumerable:!1,value:e})}function O(e,t){this.storage=e,this.key=t}function S(){this.content=[]}function k(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a="number"==typeof r?r:1}function N(e){return Math.round(255*e)}function P(e,t,n,r){this.h=e,this.s=t,this.l=n,this.a="number"==typeof r?r:1}function R(e){if("#"==e.charAt(0))return k.fromHexString(e.substr(1));var t=e.indexOf("(");if(!(0<t))return T(e);var n=e.substring(0,t),r=e.slice(t+1,-1).split(","),i=3<r.length?+r[3]:void 0;switch(n){case"rgb":case"rgba":return new k(r[0]/255,r[1]/255,r[2]/255,i);case"hsl":case"hsla":return new P(r[0]/360,r[1].slice(0,-1)/100,r[2].slice(0,-1)/100,i);default:throw new Error("Unknown color format '"+n+"'")}}E.defineWidget=function(e,t){p[e]=t},E.undefineWidget=function(e){delete p[e]},E.hasWidget=function(e){return p.hasOwnProperty(e)},E.getWidgetsName=function(){return Object.keys(p)},(E.Widget=function(){}).prototype.element=null,E.Widget.prototype.render=function(e){throw new Error("Widget's 'render' prototype function not implemented.")},E.Widget.prototype.dispatchEvent=function(e){if(!this.element)throw new Error("Cannot dispatch event: the widget has not been rendered yet.");this.element.__builder.dispatchEvent(e)},h.prototype.add=function(e,t,n){this.slots[t||"__container"]={element:n,anchor:e}},E.noop=function(){},E.check=function(e,t,n){if(e!=E.VERSION_MAJOR||t!=E.VERSION_MINOR)throw new Error("Code transpiled using version "+e+"."+t+"."+n+" cannot be run in the current environment using version "+E.VERSION+".")},E.attr=function(e,t,n,r){return{type:e,name:t,value:2<arguments.length?n:"",optional:!!r}},E.update=function(t,e){var c=[],l={},u={};if(e.args&&(e.args=e.args.filter(function(e){return!e.optional||void 0!==e.value}),e.args.forEach(function(e){var t=e.type==g.BUILDER_TYPE_EXTEND_WIDGET;if(t||e.type==g.BUILDER_TYPE_WIDGET){var n;if(t){var r=e.name.indexOf(":");if(-1==r)return void(u[e.name]=e.value);var i=e.name.substring(0,r);n=u.hasOwnProperty(i)?u[i]:u[i]={},e.name=e.name.substr(r+1)}else{if(!e.name.length)return void(l=e.value);n=l}var o=e.name.split(".");if(1<o.length){for(var a=0;a<o.length-1;a++){var s=o[a];"object"!=typeof n[s]&&(n[s]={}),n=n[s]}n[o[o.length-1]]=e.value}else n[e.name]=e.value}else c.push(e)})),e.spread&&e.spread.forEach(function(e){for(var t in e)c.push({type:g.BUILDER_TYPE_NONE,name:t,value:e[t]})}),!t.element)if((i=p[e.tagName])&&!1!==e.widget){if(t.slots=new h(e.tagName),i.prototype&&i.prototype.render){var n=new i(l,e.namespace);t.element=n.render(t.slots,null,t.bind,null),n instanceof E.Widget&&(n.element=t.element),t.element.__builder.widget=t.element.__builder.widgets[e.tagName]=n}else t.element=i(t.slots,null,t.bind,null,l,e.namespace);t.slots.slots.__container?(t.container=t.slots.slots.__container.element,t.anchor=t.slots.slots.__container.anchor):t.container=t.element}else e.namespace?t.element=t.container=document.createElementNS(e.namespace,e.tagName):t.element=t.container=document.createElement(e.tagName);for(var r in c.sort(function(e,t){return e.type-t.type}),c.forEach(function(e){t.element.__builder[e.type](e.name,e.value,t.bind,t.anchor,t.context)}),e.transitions&&e.transitions.forEach(function(e){t.element.__builder.addAnimation(e[0],e[1],e[2]||{})}),u){if(!p.hasOwnProperty(r))throw new Error("Widget '"+r+"' could not be found.");var i;if((i=p[r]).prototype&&i.prototype.render)(n=new p[r](u[r])).render(new h(""),t.element,t.bind,null),t.element.__builder.widgets[r]=n;else i(new h(""),t.element,t.bind,null,u[r])}},E.create=function(e,t,n){n.tagName=t,e.element=e.container=null,e.anchor=null,E.update(e,n)},E.createOrUpdate=function(e,t,n,r){t?E.update(e,r):E.create(e,n,r)},E.clone=function(e,t){e.element=e.container=e.element.cloneNode(!0),e.anchor=null,E.update(e,t)},E.updateSlot=function(e,t,n,r,i,o){var a=function(){if(n)for(var e=n.length-1;0<=e;e--)if(n[e].name==r)for(var t in n[e].slots)if(t==i)return n[e].slots[t]}();if(!a)throw new Error("Could not find slot '"+i+"' for widget '"+r+"'.");a.element&&(e.element=a.element,E.update(e,t)),o.call(e.context,a.anchor?a.anchor.parentNode:e.element,a.anchor)},E.body=function(e,t,n){e.slots&&Object.keys(e.slots.slots).length&&(t=(t||[]).concat(e.slots)),n.call(e.context,e.container,e.anchor,t)},E.forms=function(t){Array.prototype.slice.call(arguments,1).forEach(function(e){t.element.__builder.form(e[0],e[1],t.bind)})},E.append=function(e,t,n,r,i){(t&&t.nodeType||"string"==typeof t&&(t=document.querySelector(t)))&&(n&&n.parentNode===t?t.insertBefore(e.element,n):t.appendChild(e.element),r&&r.call(e.element),e.element.__builder&&e.element.dispatchEvent&&e.element.__builder.dispatchEvent("append"),i&&e.element.__builder.event(e.context,"remove",i,e.bind),e.bind&&e.bind.appendChild(e.element))},E.unique=function(e,t,n){var r=E.config.prefix+t;if(!document.querySelector("."+r)){var i=n.call(e);return i.__builder.addClass(r),i}},E.query=function(t,e,n,r,i,o){var a=!1;return i||(a=r&&"object"==typeof r&&"number"==typeof r.length)?(a||(r=e.querySelectorAll(r)),Array.prototype.forEach.call(r,function(e){o.call(t,e,n)})):("string"==typeof r&&(r=e.querySelector(r)),r&&o.call(t,r,n)),r},E.clear=function(e){for(var t,n=e.container||e.element;t=n.lastChild;)n.removeChild(t)},E.mixin=function(e,t,n,r){r instanceof Node?E.append({element:r,bind:t},e,n):E.html(e,t,n,r)},E.text=function(e,t,n,r){e&&e.__builder.text(r,t,n)},E.html=function(e,t,n,r){e&&e.__builder.html(r,t,n)},E.comment=function(e,t,n,r){var i=document.createComment(r);return E.append({element:i,bind:t},e,n),i},E.on=function(e,t,n,r,i){6==arguments.length?r.__builder.event(e,i,arguments[5],n):t.__builder.event(e,r,i,n)},E.widget=function(e,t){return t?e.__builder.widgets[t]||null:e.__builder.widget||null},E.nextId=function(){return u=E.newPrefix()},E.prevId=function(){return u},E.forEach=function(e,t,n){if(t.forEach)t.forEach(n.bind(e));else{var r=0;for(var i in t)n.call(e,i,t[i],r++,t)}},E.range=function(e,t,n,r){if(t<n)for(var i=t;i<n;i++)r.call(e,i);else for(i=n;t<i;i--)r.call(e,i)},E.ready=function(e){"complete"==document.readyState?e():window.addEventListener("load",e)},f(Window),f(Document),f(Element),f(DocumentFragment),"function"==typeof ShadowRoot&&f(ShadowRoot),d.prototype.deep=!1,d.prototype.diff=!0,d.prototype.computed=!1,d.prototype.replace=function(e){return e&&"object"==typeof e?e.constructor===Array||e.constructor===_?new _(this,e):e.constructor===Date?new A(this,e):e.constructor===A?new A(this,e.date):e:e},d.prototype.update=function(e){this.updateImpl(arguments.length?this.replace(e):this.internal.value,this.updateType,this.updateData),this.updateType=void 0,this.updateDate=void 0},d.prototype.updateImpl=function(e,t,n){var r=this.internal.value;for(var i in this.internal.value=e,this.internal.subscriptions){var o=this.internal.subscriptions[i];o.type&&o.type===t||o.callback(e,r,t,n)}},d.prototype.snap=function(e){this.internal.snaps[e]=this.internal.value},d.prototype.snapped=function(e){return e in this.internal.snaps?this.internal.snaps[e]:this.internal.value},d.prototype.subscribe=function(e,t){var n=this.internal.count++,r=this.internal.subscriptions,i=this.internal.subscriptions[n]={type:t,callback:e};return{to:this,subscription:i,dispose:function(){delete r[n]}}},d.prototype.valueOf=function(){return this.internal.value},d.prototype.toJSON=function(){return this.internal.value&&this.internal.value.toJSON?this.internal.value.toJSON():this.internal.value},d.prototype.toString=function(){return this.internal.value+""},Object.defineProperty(d.prototype,"value",{configurable:!0,get:function(){return this.internal.value},set:function(e){e!==this.internal.value&&this.update(e)}}),(v.prototype=Object.create(d.prototype)).deep=!0,v.prototype.replace=function(e){return this.observeChildren(e,[])},v.prototype.makeChild=function(e,t){return e&&"object"==typeof e&&this.observeChildren(e,t),e},v.prototype.observeChildren=function(r,i){var o=this;return Object.keys(r).forEach(function(e){var t=i.concat(e),n=o.makeChild(r[e],t);Object.defineProperty(r,e,{enumerable:!0,get:function(){return o.lastPath=t,n},set:function(e){n=o.makeChild(e,t),o.update()}})}),r},v.prototype.merge=function(e){var t=this.update;this.update=function(){},this.mergeImpl(this.internal.value,e),this.update=t,this.update()},v.prototype.mergeImpl=function(e,t){for(var n in t)"object"==typeof e[n]&&"object"==typeof t[n]?this.mergeImpl(e[n],t[n]):e[n]=t[n]},(y.prototype=Object.create(d.prototype)).diff=!1,Object.defineProperty(y.prototype,"value",{configurable:!0,get:function(){return this.internal.value},set:function(e){this.update(e)}}),_.prototype=Object.create(Array.prototype),[{name:"copyWithin"},{name:"fill"},{name:"pop",type:g.OBSERVABLE_UPDATE_TYPE_ARRAY_POP},{name:"push",type:g.OBSERVABLE_UPDATE_TYPE_ARRAY_PUSH},{name:"reverse"},{name:"shift",type:g.OBSERVABLE_UPDATE_TYPE_ARRAY_SHIFT},{name:"sort"},{name:"splice",type:g.OBSERVABLE_UPDATE_TYPE_ARRAY_SPLICE},{name:"unshift",type:g.OBSERVABLE_UPDATE_TYPE_ARRAY_UNSHIFT}].forEach(function(t){Array.prototype[t.name]&&Object.defineProperty(_.prototype,t.name,{enumerable:!1,value:function(){var e=Array.prototype[t.name].apply(this,arguments);return this.observable.updateType=t.type,this.observable.updateData=arguments,this.observable.update(),e}})}),Object.defineProperty(_.prototype,"toJSON",{value:function(){return Array.apply(null,this)}}),A.prototype=Object.create(Date.prototype),Object.getOwnPropertyNames(Date.prototype).forEach(function(t){m.startsWith.call(t,"set")?Object.defineProperty(A.prototype,t,{enumerable:!1,value:function(){var e=Date.prototype[t].apply(this.date,arguments);return this.observable.update(),e}}):Object.defineProperty(A.prototype,t,{enumerable:!1,value:function(){return Date.prototype[t].apply(this.date,arguments)}})}),O.prototype.get=function(e){var t=this.storage.getItem(this.key);return null===t?e:JSON.parse(t)},O.prototype.set=function(e){this.storage.setItem(this.key,JSON.stringify(e))},E.isObservable=function(e){return e instanceof d},E.observe=function(e,t,n,r){var i=e.subscribe(t,n);return r||t(e.value),i},E.unobserve=function(e){return E.isObservable(e)?(e.computed&&e.subscriptions.forEach(function(e){e.dispose()}),e.value):e},E.value=function(e){return E.isObservable(e)?e.value:e},E.observableImpl=function(e,t,n,r){if(n){if(n instanceof Storage)return w(e,t,new O(n,r));if("object"==typeof n)return w(e,t,n);if(window.localStorage)return w(e,t,new O(window.localStorage,n));console.warn("window.localStorage is unavailable. '"+n+"' will not be stored.")}return new e(t)},(E.observable=function(e,t,n){return E.observableImpl(d,e,t,n)}).deep=function(e,t,n){return E.observableImpl(v,e,t,n)},E.observable.always=function(e,t,n){return E.observableImpl(y,e,t,n)},E.computedObservableImpl=function(e,t,n,r,i,o){o&&Array.prototype.push.apply(r,E.filterObservables(o));var a=new e(i.call(t));return a.computed=!0,a.dependencies=r,a.subscriptions=[],r.forEach(function(e){a.subscriptions.push(e.subscribe(function(){a.value=i.call(t)}))}),n&&a.subscriptions.forEach(function(e){n.subscribe(e)}),a},(E.computedObservable=function(e,t,n,r,i){return E.computedObservableImpl(d,e,t,n,r,i)}).deep=function(e,t,n,r,i){return E.computedObservableImpl(v,e,t,n,r,i)},E.computedObservable.deps=function(e,t,n,r,i,o){return Array.prototype.push.apply(n,o instanceof Array?o:Array.prototype.slice.call(arguments,5)),E.computedObservableImpl(d,e,t,n,r,i)},E.computedObservable.always=function(e,t,n,r,i){return E.computedObservableImpl(y,e,t,n,r,i)},E.maybeComputedObservable=function(e,t,n,r,i){return Array.prototype.push.apply(n,E.filterObservables(i)),n.length?E.computedObservable(e,t,n,r):r.call(e)},E.filterObservables=function(e){return e.filter(E.isObservable)},S.prototype.value=function(e,t){this.content.push({key:e,value:t})},S.prototype.stat=function(e){this.content.push({key:e})},E.root=function(){return new S},E.select=function(e,t){var n=new S;return e.content.push({selector:t,value:n.content}),n},E.unit=function(t,n){if("string"==typeof n){function e(e){if(m.endsWith.call(n,e)){if(t.unit&&t.unit!=e)throw new Error("Units '"+t.unit+"' and '"+e+"' are not compatible. Use the calc() css function instead.");return t.unit=e,n=parseFloat(n.substring(0,n.length-e.length)),!0}}e("cm")||e("mm")||e("in")||e("px")||e("pt")||e("pc")||e("rem")||e("em")||e("ex")||e("ch")||e("vw")||e("vh")||e("vmin")||e("vmax")||e("%")||e("s")}return n},E.computeUnit=function(e,t){return"number"==typeof t&&e.unit?Math.round(1e3*t)/1e3+e.unit:t},E.compileStyle=function(e){var n="";return function t(e){e.forEach(function(e){e.plain?e.value?n+=e.selector+":"+e.value+";":n+=e.selector+";":e.value.length&&(n+=e.selector+"{",t(e.value),n+="}")})}(e),n},E.convertStyle=function(e){var s=[];return function i(o,a,e){e.forEach(function(t){if(t.selector){var e=t.selector;if("@"==e.charAt(0)){var n=s;s=[],"media"==e.substr(1,5)||"document"==e.substr(1,8)?i(o,E.select(s,o.join(",")),t.value):i([],s,t.value),n.push({selector:e,value:s}),s=n}else{var r=[];o.length?e.split(",").map(function(t){var n=-1!=t.indexOf("&");o.forEach(function(e){n?r.push(t.trim().replace(/&/g,e)):r.push(e+" "+t.trim())})}):r=e.split(",").map(function(e){return e.trim()}),i(r,E.select({content:s},r.join(",")).content,t.value)}}else"@"==t.key.charAt(0)?s.push({plain:!0,selector:t.key,value:t.value}):t.key.split(",").forEach(function(e){a.push({plain:!0,selector:e.trim(),value:t.value})})})}([],s,e),E.compileStyle(s)},E.compileAndBindStyle=function(e,t,n,r,i){function o(){t.textContent=E.convertStyle(e())}Array.prototype.push.apply(r,E.filterObservables(i)),r.forEach(function(e){var t=e.subscribe(o);n&&n.subscribe(t)}),o()},E.quote=function(e){return JSON.stringify(e+"")},E.css={},k.prototype.update=function(e){this.r=e(this.r,"r"),this.g=e(this.g,"g"),this.b=e(this.b,"b")},k.prototype.toHSL=function(){var e,t,n=Math.min(this.r,this.g,this.b),r=Math.max(this.r,this.g,this.b),i=(r+n)/2;if(r==n)e=t=0;else{var o=r-n;t=.5<i?o/(2-r-n):o/(r+n),e=0==o?0:r==this.r?(this.g-this.b)/o%6:r==this.g?(this.b-this.r)/o+2:(this.r-this.g)/o+4,e/=6}return new P(e,t,i,this.a)},k.prototype.toHexString=function(){return"#"+[this.r,this.g,this.b].map(N).map(function(e){return m.padStart.call(e.toString(16),2,"0")}).join("")},k.prototype.toRGBString=function(){return"rgb("+[this.r,this.g,this.b].map(N).join(", ")+")"},k.prototype.toRGBAString=function(){return"rgba("+[this.r,this.g,this.b].map(N).join(", ")+", "+this.alpha+")"},k.prototype.toString=function(){return 1==this.a?this.toHexString():this.toRGBAString()},k.fromHexString=function(e){if(3==e.length){function t(e){return parseInt(e,16)/15}return new k(t(e.charAt(0)),t(e.charAt(1)),t(e.charAt(2)))}function t(e){return parseInt(e,16)/255}return new k(t(e.substring(0,2)),t(e.substring(2,4)),t(e.substring(4,6)))},k.from=function(e){return e instanceof k?new k(e.r,e.g,e.b,e.a):e.toRGB?e.toRGB():k.from(R(e))},P.prototype.toHSLString=function(){return"hsl("+Math.round(360*this.h)+", "+Math.round(100*this.s)+"%, "+Math.round(100*this.l)+"%)"},P.prototype.toHSLAString=function(){return"hsla("+Math.round(360*this.h)+", "+Math.round(100*this.s)+"%, "+Math.round(100*this.l)+"%, "+this.a+")"},P.prototype.toString=function(){return 1==this.a?this.toHSLString():this.toHSLAString()},P.prototype.toRGB=function(){var e,t,n,r=(1-Math.abs(2*this.l-1))*this.s,i=r*(1-Math.abs(6*this.h%2-1)),o=this.l-r/2;return n=this.h<1/6?(e=r,t=i,0):this.h<2/6?(e=i,t=r,0):this.h<.5?(e=0,t=r,i):this.h<4/6?(e=0,t=i,r):this.h<5/6?(e=i,t=0,r):(e=r,t=0,i),new k(e+o,t+o,n+o,this.a)},P.from=function(e){return e instanceof P?new P(e.h,e.s,e.l,e.a):e.toHSL?e.toHSL():P.from(R(e))};var T="object"==typeof colors?function(e){return colors.hasOwnProperty(e)?k.fromHexString(colors[e]):new k(0,0,0)}:function(e){var t=document.createElement("div");return t.style.color=e,document.head.appendChild(t),e=window.getComputedStyle(t).color,document.head.removeChild(t),R(e)};function C(e,t){return new e(Math.random(),Math.random(),Math.random(),t?Math.random():void 0)}return E.css.rgb=function(e){return arguments.length?((e=k.from(R(e))).a=1,e):C(k,!1)},E.css.rgba=function(e,t){return arguments.length?(e=k.from(e),1<arguments.length&&(e.a=t),e):C(k,!0)},E.css.hsl=function(e){return arguments.length?((e=P.from(e)).a=1,e):C(P,!1)},E.css.hsla=function(e,t){return arguments.length?(e=P.from(e),1<arguments.length&&(e.a=t),e):C(P,!0)},E.css.lighten=function(e,t){return(e=P.from(e)).l+=(1-e.l)*t,e},E.css.darken=function(e,t){return(e=P.from(e)).l*=1-t,e},E.css.saturate=function(e,t){return(e=P.from(e)).s+=(1-e.s)*t,e},E.css.desaturate=function(e,t){return(e=P.from(e)).s*=1-t,e},E.css.grayscale=E.css.greyscale=function(e){return(e=k.from(e)).r=e.g=e.b=.2989*e.r+.587*e.g+.114*e.b,e},E.css.invert=function(e){return(e=k.from(e)).update(function(e){return 1-e}),e},E.css.pastel=function(e){return arguments.length?((e=P.from(e)).s=.9+.1*e.s,e.l=.75+.15*e.l,e):new P(Math.random(),.9+.1*Math.random(),.75+.15*Math.random())},E.css.sepia=function(e){return new k(.393*(e=k.from(e)).r+.769*e.g+.189*e.b,.349*e.r+.686*e.g+.168*e.b,.272*e.r+.534*e.g+.131*e.b,e.a)},E.css.mix=function(){var t=arguments.length,n=new k(0,0,0);return Array.prototype.forEach.call(arguments,function(e){k.from(e).update(function(e,t){n[t]+=e})}),n.update(function(e){return e/t}),n},E.css.contrast=function(e,t,n){return(e=k.from(e)).update(function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),.179<.2126*e.r+.7152*e.g+.0722*e.b?n||"#000":t||"#fff"},E});